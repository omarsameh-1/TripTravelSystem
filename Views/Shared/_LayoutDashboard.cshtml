<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />

    <!-- Bootstrap CSS -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.2/css/bootstrap.min.css'>
    <!-- Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- Font Awesome CSS -->
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.3.1/css/all.css'>
    <!-- you need to include the shieldui css and js assets in order for the charts to work -->
    <link rel="stylesheet" href="~/Content/wall.css">
    <script src="~/Scripts/wall.js"></script>


    <title>@ViewBag.Title</title>

</head>
<body>

    <!--Start Navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Wall Page</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                @using TripTravelSystem.Models
                @using (TripsTravel_DBEntities dc = new TripsTravel_DBEntities())
                {
                    if (User.Identity.IsAuthenticated)
                    {
                        if (User.IsInRole("Admin"))
                        {


                            var v = dc.Users.Where(a => a.email == User.Identity.Name).FirstOrDefault();
                            if (v != null)
                            {
                                <li class="nav-item active">@Html.ActionLink("Profile", "index", "Admin", new { userid = v.userID  }, new { @class = "nav-link" }) <span class="sr-only">(current)</span></li>
                                <li class="nav-item">@Html.ActionLink("Users page", "", "", new { userid = v.userID }, new { @class = "nav-link" })</li>
                                <li class="nav-item">@Html.ActionLink("Posts page", "", "", new { userid = v.userID }, new { @class = "nav-link" })</li>
                                <li class="nav-item">@Html.ActionLink("Posts Request", "", "", new { userid = v.userID }, new { @class = "nav-link" })</li>

                            }
                        }
                    }

                }

            </ul>

            <!--SIGN UP & LOGIN-->
            <div class="my-2 my-lg-0">
               
                <!--SIGN-->
                @if (Request.IsAuthenticated)
                {
                    <div class="d-inline">
                        @using (Html.BeginForm("logout", "Authontication", FormMethod.Post, new { id = "logoutForm" }))
                        {
                            <a class="btn btn-outline-danger btn-round" type="button" href="javascript:document.getElementById('logoutForm').submit()">LogOut</a>
                        }
                    </div>
                    <div>
                        Welcome @HttpContext.Current.User.Identity.Name
                    </div>
                }
                
                
                    @*<div class="d-inline">
                        <a class="btn btn-outline-info btn-round" href="@Url.Action("RegisterPopUp","Authontication")" type="button" data-toggle="modal" data-target="#SignUpModal">Register</a>
                    </div>
                    <!--Start Model-->

                    <div class="modal fade" id="SignUpModal" role="dialog" area-hidden="true" tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">

                            </div>
                        </div>
                    </div>
                    <!--End Modal-->
                    <!--LOGIN-->
                    <div class="d-inline">
                        <a class="btn btn-outline-success  btn-round" href="@Url.Action("LoginPopUp","Authontication")" type="button" data-toggle="modal" data-target="#LoginModel">Login</a>
                    </div>
                    <!--start model-->
                    <div class="modal fade" id="LoginModel" tabindex="-1" role="dialog">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">

                            </div>
                        </div>
                    </div>
                    <!--end model-->
                *@

            </div>
        </div>
    </nav>
    <!--End Navbar-->


    <div>
        @RenderBody()
    </div>
    <hr />
    <footer>
        <p>&copy; @DateTime.Now.Year - Trips and Travel System</p>
    </footer>


    <!-- jQuery -->
    <script src='https://code.jquery.com/jquery-3.3.1.slim.min.js'></script>
    <!-- Popper JS -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js'></script>
    <!-- Bootstrap JS -->
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js'></script>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>

</body>
</html>
